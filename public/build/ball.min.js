/*! bounce 2017-05-07 */
"use strict";function distance(a,b,c,d){var e=6371,f=(d-b).toRad(),g=(c-a).toRad(),h=Math.sin(f/2)*Math.sin(f/2)+Math.cos(b.toRad())*Math.cos(d.toRad())*Math.sin(g/2)*Math.sin(g/2),i=2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h)),j=e*i*1e3;return console.clear(),numberWithCommas(Math.round(j))+" M"}function numberWithCommas(a){return a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function initMap(){var a={lat:41.77131167976406,lng:-1.40625},b=new google.maps.Map(document.getElementById("map"),{zoom:2,center:a}),c=[];b.addListener("click",function(a){function e(){for(var a=0;a<c.length;a++)c[a].setMap(null)}var f={lat:a.latLng.lat(),lng:a.latLng.lng()};socket.emit("chat message","click at "+f.lat+", "+f.lng),console.log(f),console.log(distance(a.latLng.lng(),a.latLng.lat(),ballpos.lng,ballpos.lat)),e();var g=new google.maps.Marker({position:f,map:b,icon:"rocket.png",title:"Uluru (Ayers Rock)"});c.push(g),new google.maps.InfoWindow({content:d}).open(b,g)});var d='<div id="content">HERE</div>'}var socket=io(),ballpos,getBall="/api/getball",getBallFunc=function(){fetch(getBall).then(function(a){return a.json()}).then(function(a){ballpos={lat:a.loc.lat,lng:a.loc.lon},console.log(ballpos)})};getBallFunc(),void 0===Number.prototype.toRad&&(Number.prototype.toRad=function(){return this*Math.PI/180}),socket.on("chat message",function(a){console.log(a)});