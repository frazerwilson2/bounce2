/*! bounce 2017-05-06 */
function getBall(){$.ajax({url:"/api/getball",success:function(a){ballpos={lat:a.loc.lat,lng:a.loc.lon},console.log(ballpos)},dataType:"json"})}function distance(a,b,c,d){var e=6371,f=(d-b).toRad(),g=(c-a).toRad(),h=Math.sin(f/2)*Math.sin(f/2)+Math.cos(b.toRad())*Math.cos(d.toRad())*Math.sin(g/2)*Math.sin(g/2),i=2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h)),j=e*i*1e3;return console.clear(),numberWithCommas(Math.round(j))+" M"}function numberWithCommas(a){return a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function initMap(){var a={lat:41.77131167976406,lng:-1.40625},b=new google.maps.Map(document.getElementById("map"),{zoom:2,center:a}),c=[];b.addListener("click",function(a){var e={lat:a.latLng.lat(),lng:a.latLng.lng()};socket.emit("chat message","click at "+e.lat+", "+e.lng),console.log(e),console.log(distance(a.latLng.lng(),a.latLng.lat(),ballpos.lng,ballpos.lat)),function(){for(i=0;i<c.length;i++)c[i].setMap(null)}();var f=new google.maps.Marker({position:e,map:b,icon:"rocket.png",title:"Uluru (Ayers Rock)"});c.push(f),new google.maps.InfoWindow({content:d}).open(b,f)});var d='<div id="content">HERE</div>'}var socket=io(),ballpos;getBall(),void 0===Number.prototype.toRad&&(Number.prototype.toRad=function(){return this*Math.PI/180}),socket.on("chat message",function(a){console.log(a)});